<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Video Download Tracker Test</title>
  </head>
  <body>
    <h1>Video Download Tracker Test</h1>
    <video id="testVideo" controls width="400" height="300">
      <source
        src="https://vrec-k.yektanet.com/media/videos/alef/alef_25e5675db37569ce2b855d879d7cd9b2b1b6b5d524596c02b19ca15795796ddc.mp4"
        type="video/mp4"
      />
      Your browser does not support the video tag.
    </video>

    <div id="stats"></div>

    <script type="module">
      import { VideoBufferTracker } from "./dist/index.esm.js";

      const tracker = new VideoBufferTracker({
        trafficEventUrl: "https://httpbin.org/post", // Test endpoint
      });

      const video = document.getElementById("testVideo");
      const statsDiv = document.getElementById("stats");

      tracker.setupVideoTracking(video, video.src);

      // Update stats every second
      setInterval(() => {
        const stats = tracker.getTrackingStats();
        statsDiv.innerHTML = `
                <h3>Tracking Stats:</h3>
                <p>Total Size: ${stats.totalSize} bytes</p>
                <p>Downloaded: ${stats.estimatedDownloadedBytes} bytes</p>
                <p>Full Download Submitted: ${stats.hasSubmittedFullDownload}</p>
            `;
      }, 1000);
    </script>
  </body>
</html>
